<div class="page-header">
  <div class="row">
    <div class="col-md-12">
      <h1 class="heading-shift">
        Tasks
        <small class="pull-right retext">
          <text class="sorty">
            <%= link_to_unless_current 'All Tasks', tasks_path(all_task: "All tasks")%> |
            <%= link_to_if(@booly, "Incomplete Tasks", tasks_path(incomplete: "Incomplete")) %>
          </text>
            <%= link_to 'Create Task', new_task_path, class: "btn btn-info shifty"%>
        </small>
      </h1>
      <hr>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <table class="table">

      <thead>
        <% if @booly%>
        <tr>
          <th><%=link_to "Description", all_task: "All tasks", sort: :description %></th>
          <th><%=link_to "Complete", all_task: "All tasks", sort: :complete %></th>
          <th><%=link_to "Date", all_task: "All tasks", sort: :date %></th>
          <th colspan="3"></th>
        </tr>
        <%else%>
        <tr>
          <th><%=link_to "Description", incomplete: "Incomplete", sort: :description %></th>
          <th><%=link_to "Complete", incomplete: "Incomplete", sort: :complete %></th>
          <th><%=link_to "Date", incomplete: "Incomplete", sort: :date %></th>
          <th colspan="3"></th>
        </tr>
        <%end%>

      </thead>

      <tbody>
        <% @tasks.each do |task| %>
          <%if task.date != nil && task.date >= Date.today && task.date <= Date.today+7%>
            <tr class="alert alert-danger">
          <% else%>
            <tr>
          <%end%>
          <td class>
            <%= task.description %>
          </td>
          <%if task.complete == true %>
            <td>
              <text class="glyphicon glyphicon-ok">
              <text>
            </td>
          <%elsif%>
            <td>
              <text class="glyphicon glyphicon-remove">
              <text>
            </td>
          <%end%>

          <%if task.date%>
            <td>
              <%= task.date.strftime("%m/%d/%Y")%>
            </td>
          <%else %>
            <td>
              <%=task.date%>
            </td>
            <%end%>

          <td>
            <div class="pull-right">
              <%= link_to 'Show', task, class: "btn btn-primary" %>
              <%= link_to 'Edit', edit_task_path(task), class: "btn btn-warning" %>
              <%= link_to 'Destroy', task, class: "btn btn-danger",
                                            method: :delete,
                                            data: { confirm: 'Are you sure?' } %>
            </div>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
